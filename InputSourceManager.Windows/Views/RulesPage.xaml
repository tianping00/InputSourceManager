<UserControl x:Class="InputSourceManager.Windows.Views.RulesPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- æ ‡é¢˜å’Œæ“ä½œæŒ‰é’® -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
            <TextBlock Text="è§„åˆ™ç®¡ç†" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
            <Separator Width="20" Visibility="Hidden"/>
            <Button x:Name="BtnAdd" Content="âž• æ·»åŠ è§„åˆ™" 
                    Style="{DynamicResource MaterialDesignRaisedButton}"
                    Click="BtnAdd_Click"/>
            <Button x:Name="BtnEdit" Content="âœ ç¼–è¾‘" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    IsEnabled="False" Click="BtnEdit_Click"/>
            <Button x:Name="BtnDelete" Content="ðŸ—‘ åˆ é™¤" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    IsEnabled="False" Click="BtnDelete_Click"/>
            <Separator Width="20" Visibility="Hidden"/>
            <Button x:Name="BtnImport" Content="ðŸ“¥ å¯¼å…¥" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    Click="BtnImport_Click"/>
            <Button x:Name="BtnExport" Content="ðŸ“¤ å¯¼å‡º" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    Click="BtnExport_Click"/>
        </StackPanel>

        <!-- è§„åˆ™åˆ—è¡¨ -->
        <DataGrid Grid.Row="1" x:Name="DataGridRules" 
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionChanged="DataGridRules_SelectionChanged">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="å¯ç”¨" Binding="{Binding IsEnabled}" Width="60"/>
                <DataGridTextColumn Header="è§„åˆ™åç§°" Binding="{Binding Name}" Width="150"/>
                <DataGridTextColumn Header="ç±»åž‹" Binding="{Binding Type}" Width="100"/>
                <DataGridTextColumn Header="ç›®æ ‡" Binding="{Binding Target}" Width="200"/>
                <DataGridTextColumn Header="ç›®æ ‡è¾“å…¥æ³•" Binding="{Binding TargetInputSource}" Width="150"/>
                <DataGridTextColumn Header="ä¼˜å…ˆçº§" Binding="{Binding Priority}" Width="80"/>
                <DataGridTextColumn Header="ä½¿ç”¨æ¬¡æ•°" Binding="{Binding UsageCount}" Width="80"/>
                <DataGridTextColumn Header="æœ€åŽä½¿ç”¨" Binding="{Binding LastUsed, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" Width="120"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ç­›é€‰å’Œç»Ÿè®¡ -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,12,0,0">
            <TextBlock Text="ç­›é€‰:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <ComboBox x:Name="CmbFilterType" 
                      Width="120" 
                      SelectionChanged="CmbFilterType_SelectionChanged">
                <ComboBoxItem Content="å…¨éƒ¨"/>
                <ComboBoxItem Content="åº”ç”¨ç¨‹åº"/>
                <ComboBoxItem Content="ç½‘ç«™"/>
                <ComboBoxItem Content="è¿›ç¨‹"/>
            </ComboBox>
            <TextBlock x:Name="TxtRuleCount" Text="å…± 0 æ¡è§„åˆ™" 
                       VerticalAlignment="Center" 
                       Margin="16,0,0,0"
                       Foreground="Gray"/>
        </StackPanel>
    </Grid>
</UserControl>