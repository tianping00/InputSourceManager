<Window x:Class="InputSourceManager.Windows.Views.RuleEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="编辑规则" Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 规则基本信息 -->
        <GroupBox Grid.Row="0" Header="基本信息" Margin="0,0,0,16">
            <Grid Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="规则名称:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center"/>
                <TextBox Grid.Row="0" Grid.Column="1" x:Name="TxtRuleName" 
                         Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                         Margin="8,8,8,8" materialDesign:HintAssist.Hint="输入规则名称"/>

                <TextBlock Grid.Row="0" Grid.Column="2" Text="规则类型:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="3" x:Name="CmbRuleType" 
                          Style="{DynamicResource MaterialDesignOutlinedComboBox}"
                          Margin="8,8,0,8" materialDesign:HintAssist.Hint="选择规则类型"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="目标:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center" Margin="0,16,0,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" x:Name="TxtTarget" 
                         Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                         Margin="8,16,8,0" materialDesign:HintAssist.Hint="应用程序名或网站域名"/>

                <TextBlock Grid.Row="1" Grid.Column="2" Text="优先级:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center" Margin="0,16,0,0"/>
                <ComboBox Grid.Row="1" Grid.Column="3" x:Name="CmbPriority" 
                          Style="{DynamicResource MaterialDesignOutlinedComboBox}"
                          Margin="8,16,0,0" materialDesign:HintAssist.Hint="选择优先级"/>
            </Grid>
        </GroupBox>

        <!-- 输入法设置 -->
        <GroupBox Grid.Row="1" Header="输入法设置" Margin="0,0,0,16">
            <Grid Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="目标输入法:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="1" x:Name="CmbTargetInputSource" 
                          Style="{DynamicResource MaterialDesignOutlinedComboBox}"
                          Margin="8,8,8,8" materialDesign:HintAssist.Hint="选择目标输入法"/>

                <TextBlock Grid.Row="0" Grid.Column="2" Text="备用输入法:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="3" x:Name="CmbFallbackInputSource" 
                          Style="{DynamicResource MaterialDesignOutlinedComboBox}"
                          Margin="8,8,0,8" materialDesign:HintAssist.Hint="选择备用输入法（可选）"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="切换延迟 (毫秒):" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center" Margin="0,16,0,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" x:Name="TxtSwitchDelay" 
                         Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                         Text="0" Margin="8,16,8,0" materialDesign:HintAssist.Hint="输入法切换延迟"/>

                <TextBlock Grid.Row="1" Grid.Column="2" Text="强制切换:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center" Margin="0,16,0,0"/>
                <CheckBox Grid.Row="1" Grid.Column="3" x:Name="ChkForceSwitch" 
                          Content="即使当前已是目标输入法也强制切换" 
                          Style="{DynamicResource MaterialDesignCheckBox}"
                          Margin="8,16,0,0"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="条件设置:" 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}" VerticalAlignment="Center" Margin="0,16,0,0"/>
                <StackPanel Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Margin="8,16,0,0">
                    <CheckBox x:Name="ChkOnlyWhenFocused" Content="仅在窗口获得焦点时切换" 
                              Style="{DynamicResource MaterialDesignCheckBox}" Margin="0,0,0,4"/>
                    <CheckBox x:Name="ChkOnlyWhenTyping" Content="仅在用户开始输入时切换" 
                              Style="{DynamicResource MaterialDesignCheckBox}" Margin="0,0,0,4"/>
                    <CheckBox x:Name="ChkRespectUserChoice" Content="尊重用户手动选择的输入法" 
                              Style="{DynamicResource MaterialDesignCheckBox}"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- 操作按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="BtnTest" Content="测试规则" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    Width="100" Margin="0,0,16,0" Click="BtnTest_Click"/>
            <Button x:Name="BtnSave" Content="保存" 
                    Style="{DynamicResource MaterialDesignRaisedButton}"
                    Width="100" Margin="0,0,16,0" Click="BtnSave_Click"/>
            <Button x:Name="BtnCancel" Content="取消" 
                    Style="{DynamicResource MaterialDesignOutlinedButton}"
                    Width="100" Click="BtnCancel_Click"/>
        </StackPanel>
    </Grid>
</Window>


